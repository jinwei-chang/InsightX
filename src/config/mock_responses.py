"""
Mock LLM responses for demo purposes when Gemini API quota is exceeded.
提供所有 AI 功能的模擬回應，用於展示系統功能。
"""

mock_responses = {
    "reply_to_complaint": {
        "出餐速度慢": """親愛的顧客您好，

非常感謝您的寶貴意見，也為我們的出餐速度造成您的等待感到抱歉。

**我們的改進措施：**
1. ✅ 已增加廚房人手，優化備料流程
2. ⏰ 尖峰時段提前準備熱門餐點
3. 📱 導入新點餐系統，加快訂單處理

我們承諾將出餐時間縮短至 15-20 分鐘內。
誠摯邀請您再次光臨，體驗我們的改善成果！

如有任何問題，歡迎隨時聯繫我們。

祝您用餐愉快！
Pizza Shalom 團隊 敬上""",
        
        "停車不方便": """親愛的顧客您好，

感謝您的反饋！我們深知停車問題確實造成不便。

**目前的解決方案：**
1. 🅿️ 已與鄰近停車場簽約，提供優惠停車
2. 🚗 平日來店消費滿 $500，可享停車代金券
3. 🚴 增設機車停車位，方便騎車的朋友

我們會持續努力改善交通便利性。

期待再次為您服務！

Pizza Shalom 團隊 敬上""",
        
        "價格偏高": """親愛的顧客您好，

感謝您的寶貴意見！

我們的定價考量：
1. 🍕 使用進口食材，堅持手工窯烤
2. 👨‍🍳 專業職人現場製作
3. ♻️ 重視食材品質和環境永續

**好消息：**
- 🎉 即將推出平日優惠套餐
- 💝 會員累積點數享折扣
- 📅 每週三「優惠日」特價活動

我們會在品質與價格間找到更好的平衡。
誠摯期待您再次光臨！

Pizza Shalom 團隊 敬上"""
    },
    
    "root_cause_analysis": {
        "出餐速度慢": """## 🔍 可能的根本原因 (Root Causes)

1. **廚房產能不足**
   - 尖峰時段訂單量超過現有廚房負荷
   - 窯烤披薩需要時間，無法快速量產
   - 備料流程未優化，臨時備料延誤

2. **人力配置問題**
   - 週末與平日人力配置相同
   - 缺乏專職備料人員
   - 新進員工訓練不足，效率較低

3. **流程管理待改善**
   - 點餐到出餐的流程複雜
   - 未建立優先順序管理機制
   - 跨部門溝通效率不佳

## 🛠️ 改善對策 (Solutions)

1. **優化廚房流程**
   - 📊 導入訂單管理系統，自動排程
   - ⏰ 熱門時段提前備料（麵團、醬料）
   - 🔥 增加一座備用窯，提升產能

2. **彈性人力調配**
   - 👥 尖峰時段增加臨時人力支援
   - 📚 建立標準作業流程（SOP）加速訓練
   - 💰 提供績效獎金激勵效率提升

3. **數據驅動決策**
   - 📈 分析歷史訂單，預測尖峰時段
   - ⏱️ 設定每道餐點標準製作時間
   - 📱 客戶 App 顯示預估等待時間""",
        
        "停車不方便": """## 🔍 可能的根本原因

1. **地理位置限制**
   - 店址位於巷弄內，路邊停車位稀少
   - 周邊商家多，停車競爭激烈
   - 缺乏專屬停車場

2. **資訊不透明**
   - 顧客不知道附近停車選項
   - 未提供停車引導資訊
   - Google 地圖未標註停車位置

3. **補償機制不足**
   - 未提供停車優惠或代金券
   - 缺乏替代交通方案說明

## 🛠️ 改善對策

1. **與鄰近停車場合作**
   - 🤝 簽約 2-3 個停車場，提供優惠
   - 🎟️ 消費滿額送停車代金券
   - 📍 製作停車地圖，標示最近停車場

2. **多元交通方案**
   - 🚲 設置 Ubike 站資訊指引
   - 🚌 提供公車路線建議
   - 🛵 增設機車專用停車區

3. **數位化資訊服務**
   - 📱 官網/App 顯示即時停車資訊
   - 🗺️ Google 商家資訊加入停車說明
   - 💬 Line 客服提供停車諮詢"""
    },
    
    "marketing_copy": """🍕✨ **手工窯烤的美味堅持** ✨🍕

當柴火在窯中跳躍，麵團在 400 度高溫中緩緩膨脹...
這不只是披薩，是一場味蕾的盛宴！🔥

**為什麼大家都愛 Pizza Shalom？**
🎯 餐點美味 | 每口都是驚喜
🏡 環境舒適 | 帳篷下的浪漫
💖 服務親切 | 像回家一樣溫暖

📸 **本週熱推：客家鹹豬肉披薩**
傳統與創新的完美結合，一試難忘！

📍 新竹縣竹北市莊敬北路286號
⏰ 週一至週日 15:30-21:00
☎️ 0978-532-326

💝 **限時優惠**
本週三來店消費，enjoy 9折優惠！

#Pizza #窯烤披薩 #新竹美食 #竹北必吃 #手工披薩
""",
    
    "weekly_plan": """## 📅 下週改善行動計畫 (Week Plan)

**週一** 📊 **數據分析日**
- 統計上週平均出餐時間
- 分析尖峰時段訂單模式
- 制定本週改善目標（減少 20% 等待時間）

**週二** 👨‍🍳 **流程優化日**
- 晨會：訓練廚房人員新的備料流程
- 測試提前備料機制
- 記錄改善前後時間差異

**週三** 🅿️ **停車方案啟動**
- 張貼停車場合作公告
- 發放第一批停車優惠券
- 更新 Google 商家停車資訊

**週四** 💰 **價格策略調整**
- 推出平日午餐優惠套餐
- 設計會員點數回饋方案
- 訓練員工說明優惠內容

**週五** 📱 **科技輔助日**
- 安裝訂單管理系統
- 測試廚房顯示螢幕
- 員工操作訓練

**週六** 🎯 **實戰演練日**
- 實施所有改善措施
- 即時監控出餐速度
- 收集顧客反饋

**週日** 📝 **總結與調整**
- 週會：檢討改善成效
- 表揚表現優異員工  
- 規劃下週持續改進項目

✅ **本週目標**：出餐時間縮短至 18 分鐘內，顧客滿意度提升 15%
""",
    
    "training_script": """## 📋 員工培訓劇本：處理「出餐速度慢」抱怨

### ❌ 錯誤示範（NG說法）

**顧客**：「你們出餐也太慢了吧！我都等 30 分鐘了！」

**員工**：「抱歉喔，我們人手不足，你再等一下。其他客人也都在等。」

**問題點**：
- ❌ 只道歉沒有同理心
- ❌ 推卸責任給「人手不足」
- ❌ 沒有提供解決方案
- ❌ 「其他人也在等」讓顧客感覺被忽視

---

### ✅ 正確示範（優良話術）

**顧客**：「你們出餐也太慢了吧！我都等 30 分鐘了！」

**員工**：「非常抱歉讓您久等了！我完全理解您的心情，30 分鐘確實太久了。
讓我立刻為您確認餐點進度...（查看訂單）您點的客家鹹豬肉披薩正在窯烤中，
大約 5 分鐘就能上桌。在等待期間，我先為您送上招待的飲料好嗎？
我們會確保披薩口感完美，值得您的等待！」

**亮點**：
- ✅ 具體道歉 + 同理心
- ✅ 主動查詢進度，給予明確時間
- ✅ 提供補償（招待飲料）
- ✅ 正面ending，強調品質

---

### 💡 服務心法提示

1. **3A 原則**
   - **Acknowledge**（承認）：「我理解您的感受」
   - **Apologize**（道歉）：「非常抱歉造成您的不便」
   - **Action**（行動）：「讓我立刻為您...」

2. **誠實且積極**
   - 不隱瞞問題，但強調正在改善
   - 給出具體時間，而非「快了」、「馬上」

3. **化危機為轉機**
   - 提供小驚喜（招待甜點、優惠券）
   - 邀請顧客下次再來體驗改善成果

**記住**：每位抱怨的顧客都是幫助我們進步的貴人！🙏
""",
    
    "internal_email": """## 📧 內部公告信

**主旨：感謝大家的努力！一起迎接更好的 Pizza Shalom 💪**

親愛的 Pizza Shalom 夥伴們，

### 👏 肯定與讚賞

首先，我要為大家的辛勞說聲感謝！

根據最新顧客評論分析，我們收到許多正面回饋：
- 🍕 **餐點美味 (32%)**：大家堅持手工窯烤的用心，顧客都感受到了！
- 🏡 **環境舒適 (25%)**：帳篷區的氛圍營造獲得好評
- 💖 **服務親切 (20%)**：你們的笑容是最好的調味料

這些成績都是團隊共同努力的成果，大家辛苦了！👍

---

### 🎯 本週改進重點

同時，我們也收到一些改善建議：
- ⏰ **出餐速度 (40% 提及)**：需加快廚房效率
- 🅿️ **停車問題 (18%提及)**：需提供更好的停車資訊
- 💰 **價格感受 (12% 提及)**：需推出更多優惠方案

**這不是批評，而是進步的機會！**

我已擬定「下週行動計畫」，需要大家配合：
1. 週二開始實施新備料流程
2. 週三啟動停車優惠方案
3. 週四推出平日優惠套餐

---

### 🚀 一起加油

我相信，只要我們齊心協力，Pizza Shalom 一定能成為新竹最受歡迎的義式餐廳！

**本月目標**：
- ✨ 出餐時間縮短至 18 分鐘
- 📈 顧客滿意度提升 15%
- 🏆 Google 評分達到 4.5 星以上

每位夥伴都是這個願景的重要推手。
讓我們一起創造更多美好的用餐體驗！💪🍕

有任何想法或建議，隨時找我討論。
我的門永遠為大家敞開！😊

**店長 敬上**
2026.01.20

---
*PS: 本週表現優異的夥伴將獲得「服務之星」獎金，加油！*
"""
}

def get_mock_response(response_type, topic=None, strengths=None, weaknesses=None, issue=None):
    """根據類型返回模擬的 AI 回應"""
    
    if response_type == "reply_to_complaint":
        return mock_responses["reply_to_complaint"].get(topic, 
            f"感謝您的反饋。我們會針對「{topic}」進行改善，期待再次為您服務！")
    
    elif response_type == "root_cause_analysis":
        return mock_responses["root_cause_analysis"].get(topic,
            f"## 針對「{topic}」的分析\n\n我們會深入研究此問題並提出改善方案。")
    
    elif response_type == "marketing_copy":
        return mock_responses["marketing_copy"]
    
    elif response_type == "weekly_plan":
        return mock_responses["weekly_plan"]
    
    elif response_type == "training_script":
        return mock_responses["training_script"]
    
    elif response_type == "internal_email":
        return mock_responses["internal_email"]
    
    return "AI 回應生成中..."
